<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∑–∞–∫–∞–∑—ã - Food Delivery Service</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="print.css" media="print">
    <link rel="stylesheet" href="orders.css">
</head>
<body>
    <header>
        <h1>Food Delivery Service</h1>
        <nav>
            <a href="index.html#home">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="index.html#menu">–ú–µ–Ω—é</a>
            <a href="lunch.html">–°–æ–±—Ä–∞—Ç—å –ª–∞–Ω—á</a>
            <a href="orders.html" class="active">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
            <a href="index.html#about">–û –Ω–∞—Å</a>
            <a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            <a href="contact.html">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</a>
            <a href="checkout.html">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
            <a href="login.html">–í—Ö–æ–¥</a>
        </nav>
    </header>

    <main class="orders-main">
        <div class="container">
            <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
            
            <div class="orders-controls">
                <div class="search-box">
                    <i class="bi bi-search"></i>
                    <input type="text" id="search-orders" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–∫–∞–∑–∞–º...">
                </div>
                <button class="refresh-btn" id="refresh-orders">
                    <i class="bi bi-arrow-clockwise"></i> –û–±–Ω–æ–≤–∏—Ç—å
                </button>
            </div>
            
            <div class="orders-container">
                <div id="orders-loading" class="loading-spinner">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</p>
                </div>
                
                <div id="orders-list" class="orders-list">
                    <!-- –ó–∞–∫–∞–∑—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                
                <div id="no-orders" class="no-orders" style="display: none;">
                    <div class="no-orders-icon">
                        <i class="bi bi-cart-x"></i>
                    </div>
                    <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h3>
                    <p>–°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!</p>
                    <a href="lunch.html" class="btn-primary">–°–æ–±—Ä–∞—Ç—å –ª–∞–Ω—á</a>
                </div>
            </div>
        </div>
    </main>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–∫–∞–∑–∞ -->
    <div id="view-order-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="order-info">
                    <div class="info-row">
                        <span class="info-label">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞:</span>
                        <span class="info-value" id="view-order-id">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–î–∞—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è:</span>
                        <span class="info-value" id="view-order-date">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–°—Ç–∞—Ç—É—Å:</span>
                        <span class="info-value status" id="view-order-status">-</span>
                    </div>
                </div>
                
                <div class="order-dishes">
                    <h4>–°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞:</h4>
                    <div id="view-order-dishes">
                        <!-- –ë–ª—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
                
                <div class="order-summary">
                    <div class="summary-row">
                        <span>–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞:</span>
                        <span class="price" id="view-order-total">-</span>
                    </div>
                </div>
                
                <div class="delivery-info">
                    <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ:</h4>
                    <div class="info-row">
                        <span class="info-label">–ö–ª–∏–µ–Ω—Ç:</span>
                        <span class="info-value" id="view-order-customer">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                        <span class="info-value" id="view-order-phone">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email:</span>
                        <span class="info-value" id="view-order-email">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–ê–¥—Ä–µ—Å:</span>
                        <span class="info-value" id="view-order-address">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏:</span>
                        <span class="info-value" id="view-order-delivery-time">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</span>
                        <span class="info-value" id="view-order-comment">-</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary close-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ -->
    <div id="edit-order-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫–∞–∑</h3>
                <span class="modal-close">&times;</span>
            </div>
            <form id="edit-order-form" class="modal-body">
                <input type="hidden" id="edit-order-id">
                
                <div class="form-group">
                    <label for="edit-full-name">–§–ò–û *</label>
                    <input type="text" id="edit-full-name" name="full_name" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="edit-phone" name="phone" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-email">Email *</label>
                    <input type="email" id="edit-email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="edit-address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
                    <input type="text" id="edit-address" name="delivery_address" required>
                </div>
                
                <div class="form-group">
                    <label>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
                    <div class="delivery-time-options">
                        <div class="radio-group">
                            <input type="radio" id="edit-delivery-now" name="delivery_type" value="now">
                            <label for="edit-delivery-now">–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ (—Å 7:00 –¥–æ 23:00)</label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" id="edit-delivery-later" name="delivery_type" value="later">
                            <label for="edit-delivery-later">–ö–æ –≤—Ä–µ–º–µ–Ω–∏</label>
                        </div>
                        <div id="edit-time-picker" style="margin-top: 15px; display: none;">
                            <input type="time" id="edit-delivery-time" name="delivery_time" min="07:00" max="23:00">
                            <small>–î–æ—Å—Ç–∞–≤–∫–∞ —Å 7:00 –¥–æ 23:00</small>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="edit-comment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
                    <textarea id="edit-comment" name="comment" rows="3"></textarea>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn-secondary close-modal">–û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn-primary">
                        <i class="bi bi-check-lg"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="delete-order-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
                <span class="modal-close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="warning-icon">
                    <i class="bi bi-exclamation-triangle"></i>
                </div>
                <p>–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑ <strong id="delete-order-number"></strong>?</p>
                <p class="warning-text">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.</p>
                <input type="hidden" id="delete-order-id">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary close-modal">–û—Ç–º–µ–Ω–∞</button>
                <button type="button" class="btn-danger" id="confirm-delete">
                    <i class="bi bi-trash"></i> –£–¥–∞–ª–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Food Delivery Service. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </footer>

    <!-- –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï JS –§–ê–ô–õ–û–í -->
    <script src="dishes.js"></script>
    <script src="orders.js"></script>
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π inline —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
    <script>
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ orders.html –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            const checkElements = [
                'orders-loading',
                'orders-list',
                'no-orders',
                'search-orders',
                'refresh-orders'
            ];
            
            checkElements.forEach(id => {
                const element = document.getElementById(id);
                console.log(`${element ? '‚úÖ' : '‚ùå'} –≠–ª–µ–º–µ–Ω—Ç #${id}: ${element ? '–Ω–∞–π–¥–µ–Ω' : '–Ω–µ –Ω–∞–π–¥–µ–Ω'}`);
            });
            
            // –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ localStorage
            try {
                const ordersCount = JSON.parse(localStorage.getItem('food_delivery_orders'))?.length || 0;
                console.log(`üìä –í localStorage: ${ordersCount} –∑–∞–∫–∞–∑–æ–≤`);
            } catch (error) {
                console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ localStorage:', error);
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        document.addEventListener('error', function(e) {
            if (e.target.tagName === 'IMG') {
                console.warn(`‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${e.target.src}`);
                // –ú–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å fallback –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                e.target.src = 'https://via.placeholder.com/80x80/FF6347/FFFFFF?text=–ó–∞–∫–∞–∑';
            }
        }, true);
    </script>
</body>
</html>